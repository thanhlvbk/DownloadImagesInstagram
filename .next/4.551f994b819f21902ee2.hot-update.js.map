{"version":3,"sources":["/var/www/download-images-instagram/pages/index.js"],"names":["FileSaver","require","Index","props","onChangeUrl","value","setState","prevState","url","checkUrl","pattern","RegExp","test","length","showCheckUrlModal","error","indexOf","getImageFromUrl","axios","get","window","location","href","split","toString","then","image","response","data","img","downloadImage","state","method","responseType","blob","Blob","type","headers","imageName","expires","saveAs","closeCheckUrlModal","React","Component","propTypes","defaultProps"],"mappings":"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","file":"4.551f994b819f21902ee2.hot-update.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport Router from 'next/router'\nimport Textfield from '../components/Textfield'\nimport CheckUrlModal from '../components/CheckUrlModal'\nimport Button from '../components/Button'\n\nconst FileSaver = require('file-saver')\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      url: '',\n      error: '',\n      showCheckUrlModal: false,\n      image: null,\n    }\n  }\n  onChangeUrl = (value) => {\n    this.setState(prevState => ({\n      ...prevState,\n      url: value,\n    }))\n    this.checkUrl(value)\n  }\n\n  checkUrl = value => {\n    const pattern = new RegExp('^(?:[a-z]+:)?//', 'i')\n\n    if (!pattern.test(value) && value.length > 0) {\n      this.setState(prevState => ({\n        ...prevState,\n        showCheckUrlModal: true,\n        error: 'Invalid URL',\n      }))\n    } else if (value.indexOf(\"instagram.com\") < 0) {\n      this.setState(prevState => ({\n        ...prevState,\n        showCheckUrlModal: true,\n        error: 'Entered URL is not an instagram.com URL.',\n      }))\n    } else {\n      this.getImageFromUrl(value)\n    }\n  }\n\n  getImageFromUrl = (value) => {\n    axios.get(`${window.location.href}get-image/${value.split(\"/\").toString()}`)\n    .then(response => {\n      this.setState({\n        url: '',\n        image: response.data.img\n      })\n    })\n  }\n\n  downloadImage = () => {\n    const {image} = this.state\n    axios({\n      method:'get',\n      url:image,\n      responseType:'blob'\n    }).then((response) => {\n      const blob = new Blob([response.data], {type: `${response.headers['content-type']}`})\n      const imageName = `${response.headers.expires}.${response.headers['content-type'].split('/')[1]}`\n      \n      FileSaver.saveAs(blob, imageName)\n    })\n  }\n\n  closeCheckUrlModal = () => {\n    this.setState(prevState => ({\n      ...prevState,\n      showCheckUrlModal: false,\n    }))\n  }\n\n  render() {\n    const {url, error, showCheckUrlModal, image} = this.state\n    return (\n      <div className=\"dii-main\">\n        <h1 className=\"dii-app-name\">Download Instagram</h1>\n        <span className=\"dii-slogan\">Instagram images preview and download </span>\n        <Textfield\n          onChangeValue={this.onChangeUrl}\n          label={'Add link instagram ...'}\n          value={url}\n          className=\"dii-input\"\n        />\n        <CheckUrlModal\n          showModal={showCheckUrlModal}\n          closeModal={this.closeCheckUrlModal}\n          error={error}\n        />\n        {image &&\n          <React.Fragment>\n            <img src={image} className=\"dii-image\"/>\n            <Button raised ripple color=\"accent\" onClick={this.downloadImage} className=\"dii-button\">\n              Download\n            </Button>\n          </ React.Fragment>\n        }\n        <style jsx global>{`\n          .dii-main {\n            text-align: center;\n            padding: 0 20px;\n          }\n          .dii-app-name {\n            font-size: 35px;\n            font-weight: bold;\n            margin-bottom: 0px\n          }\n          .dii-slogan {\n            font-size: 14px;\n            opacity: 0.75;\n            margin: 0 0 0.75em;\n          }\n          .dii-input {\n            width: 87% !important\n          }\n          .dii-image {\n            display: block;\n            width: 95%;\n            margin: 0 auto;\n          }\n          .dii-button {\n            margin: 15px 0px !important\n            text-transform: none !important;\n          }\n          .mdl-dialog {\n            z-index: 11;\n            padding: 0px;\n          }\n          .mdl-dialog__content {\n            padding: 20px\n            font-size: 14px;\n            color: #000 !important;\n          }\n          @media screen and (min-width: 480px) {\n            .dii-main {\n              padding: 0 40px;\n            }\n            .dii-app-name {\n              font-size: 56px;\n            }\n            .dii-slogan {\n              font-size: 21px;\n            }\n            .dii-input {\n              width: 63% !important\n            }\n            .dii-image {\n              width: 68%;\n            }\n          }\n          @media screen and (min-width: 840px) {\n            .dii-input {\n              width: 46% !important\n            }\n            .dii-image {\n              width: 50%;\n            }\n          }\n        `}</style>\n      </div>\n    )\n  }\n}\n\nIndex.propTypes = {}\n\nIndex.defaultProps = {}\n\nexport default Index\n\n\n// WEBPACK FOOTER //\n// ./pages/index.js"],"sourceRoot":""}